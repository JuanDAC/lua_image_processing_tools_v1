
-- require("colorise", "Colorise"); --> https://github.com/Perkovec/colorise-lua
-- require("colors", "Colors"); --> http://sputnik.freewisdom.org/lib/colors/
--> require("dromozoa.graph", "graph"); --> https://github.com/dromozoa/dromozoa-graph/tree/master/test https://dromozoa.github.io/dromozoa-graph/
-- require("F", "F"); -- F" {variable} hola como estas?"  --> https://github.com/iambecomeroot/percent-f-strings#readme
require("fun", "Fun"); --> https://luafun.github.io/ https://github.com/luafun/luafun
-- require("lockbox", "Lockbox"); --> https://github.com/somesocks/lua-lockbox https://github.com/somesocks/lua-lockbox/tree/master/test
-- require("step", "Step"); --> https://github.com/lipp/lua-step
-- require("scope", "Scope"); --> https://github.com/basiliscos/lua-scope
-- require("struct", "Struct"); --> https://github.com/UlisseMini/luastruct
-- require("promise", "Promise"); --> https://github.com/pyericz/promise-lua
-- require("push", "Push"); --> https://github.com/sgraf812/push
-- require("random", "Random");--> https://github.com/hjpotter92/lua-random/blob/master/random.lua
require("rx", "Rx"); --> https://github.com/bjornbytes/RxLua https://github.com/bjornbytes/RxLua/tree/master/doc http://reactivex.io/intro.html
_ENV._debug=require("std._debug", "_debug")(true); --> https://lua-stdlib.github.io/_debug/
require("try-catch-finally", "Try"); --> https://github.com/djfdyuruiry/lua-try-catch-finally/blob/master/README.md
-- require("lua-pie", "Pie"); --> https://github.com/SvenMarcus/lua-pie#readme
-- require("hump.timer", "Timer"); --> https://hump.readthedocs.io/en/latest/index.html https://hump.readthedocs.io/en/latest/timer.html
-- require("hump.vector", "Vector"); --> https://hump.readthedocs.io/en/latest/index.html https://hump.readthedocs.io/en/latest/timer.html
-- require("hump.vector-light", "VectorLight"); --> https://hump.readthedocs.io/en/latest/index.html https://hump.readthedocs.io/en/latest/timer.html
-- require("hump.signal", "SignalObserver"); --> https://hump.readthedocs.io/en/latest/index.html https://hump.readthedocs.io/en/latest/timer.html
-- require("properset", "Properset"); --> https://odkr.github.io/properset.lua/ https://github.com/odkr/properset.lua#readme
-- require("raisin", "Raisin"); --> https://github.com/hugeblank/raisin/wiki https://github.com/hugeblank/raisin/wiki/Shared-API-Documentation  https://github.com/hugeblank/raisin/wiki/Raisin-API-Documentation
-- require("away", "Away"); --> https://github.com/thislight/away https://github.com/thislight/away/blob/master/wiki/usage.md https://github.com/thislight/away/blob/master/example/example.lua
-- require("iter", "Iter"); --> https://github.com/thislight/away https://github.com/thislight/away/blob/master/wiki/usage.md https://github.com/thislight/away/blob/master/example/example.lua
-- require("lualgorithms.data.stack", "Stack") --> https://github.com/chen0040/lua-algorithms#stack
-- require("lualgorithms.data.list", "ArrayList") --> https://github.com/chen0040/lua-algorithms#arraylist
-- require("lualgorithms.data.queue", "Queue") --> https://github.com/chen0040/lua-algorithms#queue
-- require("lualgorithms.data.minpq", "MinPQ") --> https://github.com/chen0040/lua-algorithms#minpq
-- require("lualgorithms.data.maxpq", "MaxPQ") --> https://github.com/chen0040/lua-algorithms#maxpq
-- require("lualgorithms.data.hashset", "HashSet") --> https://github.com/chen0040/lua-algorithms#hashset
-- require("lualgorithms.data.hashmap", "HashMap") --> https://github.com/chen0040/lua-algorithms#hashmap
-- require("lualgorithms.data.redblacktree", "SortedMap") --> https://github.com/chen0040/lua-algorithms#sortedmap-left-leaning-red-black-tree
-- require("lualgorithms.tries.rwaytries", "Tries") --> https://github.com/chen0040/lua-algorithms#tries-r-way-tries
-- require("lualgorithms.sorting.selection", "SortingSelection") --> https://github.com/chen0040/lua-algorithms#sorting-selection-sort
-- require("lualgorithms.sorting.insertion", "SortingInsertion") --> https://github.com/chen0040/lua-algorithms#sorting-insertion-sort
-- require("lualgorithms.sorting.shellsort", "SortingShell") --> https://github.com/chen0040/lua-algorithms#sorting-shell-sort
-- require("lualgorithms.sorting.mergesort", "SortingMerge") --> https://github.com/chen0040/lua-algorithms#sorting-merge-sort
-- require("lualgorithms.sorting.quicksort", "SortingQuick") --> https://github.com/chen0040/lua-algorithms#sorting-quick-sort
-- require("lualgorithms.sorting.quicksort3ways", "SortingWaysQuick)") --> https://github.com/chen0040/lua-algorithms#sorting-3-ways-quick-sort
-- require("lualgorithms.sorting.heapsort", "SortingHeap") --> https://github.com/chen0040/lua-algorithms#sorting-heap-sort
-- require("lualgorithms.shuffling", "Shuffling") --> https://github.com/chen0040/lua-algorithms#shuffling
-- require("lualgorithms.binarysearch", "BinarySearch") --> https://github.com/chen0040/lua-algorithms#binary-search-on-sorted-arraylist
-- require("lualgorithms.unionfind", "UnionFind") --> https://github.com/chen0040/lua-algorithms#union-find
-- require("luagraphs.data.graph", "Graph") --> https://github.com/chen0040/lua-graph#create-an-undirected-unweighted-graph
-- require('luafp.array', "ArrayNative"); --> https://jesterxl.github.io/luafp/doc/index.html
-- require('pl.array2d', "Array2d"); --> https://lunarmodules.github.io/Penlight/index.html
-- Array2d.printf("%s\n","hello, world!");

-- manejador de array y tablas nativas -<
-- data estructures lua --< https://github.com/mindreframer/datastructures-algorithms-stuff/tree/23d6c6939e457c58c8d2dcefbac09d6d73fa74a2/github.com/mindreframer/source-data-structures-and-algorithms-with-oop/lua
-- ui console --> https://github.com/PedroAlvesV/AbsTK https://github.com/hishamhm/tabular
-- table to string --> https://github.com/kikito/inspect.lua
local Fun=_ENV.Fun;
local app=_ENV.app;
do
	local unpack = table.unpack;
	local modules = {};

	_ENV.export = {
		current_module = nil;
		module = function (module_name)
			if type(module_name)=="string" then
				_ENV.export.current_module = module_name;
				if type(modules[_ENV.export.current_module]) == "nil" then
					modules[_ENV.export.current_module] = { default = nil };
				end
			else
				error("A string was expected to define the name of the current module");
			end
		end;
		add = function (key)
			if type(key)=="string" and type(_ENV.export.current_module)=="string" then
				return function (module)
					if type(unpack(module))~="nil" then
						modules[_ENV.export.current_module][key] = unpack(module);
					else
						error("An argument was awaited to save as a module");
					end
				end;
			elseif type(key)~="nil" and type(modules[_ENV.export.current_module].default)=="nil" and type(_ENV.export.current_module)=="string" then
				modules[_ENV.export.current_module].default=key;
			elseif  type(_ENV.export.current_module)=="string" then
				error("The module was expected by default or the key of a new module");
			else
				error("It was expected to define the current module");
			end
		end;
		modules = function (module_name)
			if type(module_name)=="string" then
				return modules[module_name];
			else
				return modules[_ENV.export.current_module];
			end
		end
	};

	local deep_copy;
	deep_copy = function (orig)
		local orig_type=type(orig);
		local copy;
		if orig_type =='table' then
			copy={}
			for orig_key, orig_value in next, orig, nil do
				copy[deep_copy(orig_key)]=deep_copy(orig_value);
			end
			setmetatable(copy, deep_copy(getmetatable(orig)));
		else -- number, string, boolean, etc
			copy=orig;
		end
		return copy;
	end;
	_ENV.deep_copy = deep_copy;

	local D_type=function (definition_types)
		local definition_types_iter=Fun.iter(definition_types):enumerate();
		return function (callback_function)
			if type(callback_function)=="table" and type(unpack(callback_function))=="function" then
				callback_function = unpack(callback_function);
			elseif type(callback_function)=="function" then
				callback_function = callback_function;
			else
				error("No function has been passed to validate types, a function or a array table was expected");
			end
			return function (...)
				local attributes={...};
				definition_types_iter:each(function (key, current_type)
					if type(current_type)=="table" then
						local type_iter = Fun.iter(current_type);
						local hash = (function (acc, value) return acc or type(attributes[key])==value end);
						local to_string = (function (acc, value) return acc..value..", " end);
						if not type_iter:reduce(hash, false) then
							local text_error = "The parameter  in the position '"..key.."' is not a type "..type_iter:reduce(to_string, "").."but is '"..type(attributes[key]).."' with value '"..tostring(attributes[key]).."'";
							app.alert(text_error);
							error(text_error);
						end
					else
						if type(attributes[key])~=current_type then
							local text_error = "The parameter in the position '"..key.."' is not a type "..current_type.." is '"..type(attributes[key]).."' with value '"..tostring(attributes[key]).."'";
							app.alert(text_error);
							error(text_error);
						end;
					end
				end);
				return callback_function(...)
			end;
		end
	end;
	local max, min = math.max, math.min;
	math.clamp = function (min_value, middle, max_value) return max(min(middle, max_value), min_value) end;
	_ENV.D_type=D_type;
	local return_true = (function () return true end);
	_ENV.return_true=return_true;
	local import_module = _ENV.import_module;
	import_module("internal.system");
	import_module("languages");
	local internal_class = import_module("internal.class");
	for key, value in pairs(internal_class) do
		_ENV[key] = value;
	end;
	import_module("interface", "Interface");
end;


-- show_warnings = show_warnings,
-- allow_writing_to_objects = allow_writing_to_objects,
-- static = static,
-- private = private,
-- public = public,
-- operators = operators,
-- extends = extends,
-- class = class,
-- interface = interface,
-- abstract_function = abstract_function,
-- implements = implements,
-- is = is,
-- import = import